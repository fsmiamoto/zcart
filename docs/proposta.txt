/
1. IDENTIFICAÇÃO DO PROJETO
Projeto Final I - Turma 2022 primeiro semestre
Título: zCart: Carrinho Inteligente para Supermercados
Equipe: 
código
	Nome
	email
	celular
	1450522
	Francisco Shigueo Miamoto
	miamoto@alunos.utfpr.edu.br
	99762-2249
	1937847
	João Pedro Zanlorensi Cardoso
	joaozanlorensi@gmail.com
	99168-2205
	

Professor Orientador: Prof.ª André Eugênio Lazzaretti
	

Resumo:
O projeto a ser desenvolvido consiste em um protótipo de carrinho inteligente de supermercado capaz de reconhecer a adição e remoção de produtos selecionados bem como suas quantidades. O princípio de funcionamento do protótipo será um modelo de inteligência artificial baseado em Deep Learning capaz de realizar as detecções a partir das imagens de uma câmera, complementadas pela leitura de um sensor de massa.
Destinado às redes de supermercado, o projeto pretende apresentar uma solução capaz de trazer uma melhor experiência ao cliente durante seu processo de compras, apresentando um sumário de todos os produtos presentes no carrinho - incluindo quantidade e preço - permitindo com que o cliente saiba a qualquer momento o quanto está gastando em uma tela touch-screen. Adicionalmente, o protótipo poderá servir de base para uma estratégia de auto-atendimento (self-checkout), no qual os clientes não precisam enfrentar filas para o pagamento pelos produtos, reduzindo o tempo de espera do cliente e contribuindo para a sua melhor experiência no estabelecimento.
	

Palavras-chave: Inteligência Artificial, Processamento Digital de Imagens, Deep Learning, Smart Shopping Cart, Carrinho Inteligente, Supermercado, Self-checkout.
	2. DESCRIÇÃO DO PROJETO / CARACTERIZAÇÃO
   1.         Objetivo Geral
Desenvolver um protótipo de carrinho inteligente de supermercado, incluindo um sistema embarcado capaz de reconhecer a adição ou remoção de produtos selecionados bem como as suas quantidades, apresentando uma interface ao usuário final que sumariza os produtos que estão no carrinho e o seu custo total. 
	

   2. Objetivos Específicos
* Construção do protótipo mecânico do carrinho.
* Geração de um conjunto de dados rotulados para o treinamento do modelo de Deep Learning.
* Treinamento do modelo de Deep Learning responsável pelo reconhecimento dos produtos.
* Montagem do circuito auxiliar para o sensor de massa.
* Desenvolvimento da aplicação contendo o algoritmo decisor responsável por analisar as leituras da célula de carga e do modelo de inteligência artificial.
* Projeto das Application Programming Interfaces (APIs) a serem utilizadas no protótipo. 
* Implementação da aplicação responsável pelo controle dos itens no carrinho, com persistência em um banco de dados.
* Construção do diagrama Entidade-Relacionamento do banco de dados.
* Design da interface de usuário.
* Desenvolvimento da aplicação responsável pela interface gráfica.
	

   3. Diagrama de funcionamento


  

	

	

   4. Descrição de funcionamento
O projeto utilizará como base dois dispositivos principais de entrada, uma câmera e uma sensor célula de carga do tipo strain gauge (SABAH, 2007). 
A câmera será responsável por fornecer um fluxo de imagens sobre o qual a aplicação reconhecedora será capaz de detectar a inserção ou remoção de produtos, utilizando técnicas de aprendizado profundo ou deep learning (DENG, 2014), nas quais uma rede neural artificial (HAYKIN, 2000) é treinada de forma a reconhecer um padrão desejado. 
De forma complementar, o protótipo irá utilizar um sensor célula de carga do tipo strain gauge, transdutor capaz de detectar a força mecânica através da variação da resistência elétrica (BOSE, 2020) de um material utilizado, sendo útil para a estimativa da massa adicionada ou removida em cada ação do usuário, permitindo determinar de forma mais confiável a quantidade adicionada ou removida de um determinado produto. A célula será conectada a um circuito integrado HX711 (AVIA SEMICONDUCTOR, 2022), capaz de amplificar o sinal obtido, bem como convertê-lo para o domínio digital através de um conversor analógico/digital (PROAKIS, 1995), forma conveniente para o processamento computadorizado.
Ambos os dispositivos estarão conectados à um Single Board Computer (SBC) – nomenclatura utilizada para computadores embarcados em uma única placa como um NVIDIA Jetson (NVIDIA, 2022) através de interfaces digitais. Os dados coletados serão processados pela aplicação denominada Reconhecedor de Produtos, responsável por detectar ações de adição ou remoção de produtos no carrinho, bem como suas quantidades. Ao detectar alguma ação, ela irá se comunicar com outra aplicação, o Gerenciador de carrinho,  que será executada no mesmo sistema operacional e se comunicará através do protocolo HTTP (FOROUZAN, 2007).
O Gerenciador de carrinho será responsável por gerenciar o estado atual do carrinho, armazenando as informações necessárias para a sua operação em um banco de dados relacional (SILBERSCHATZ, 2010) em arquivo SQLite3. O banco de dados conterá as tabelas relevantes para o controle de quais produtos são detectáveis, bem como quais estão atualmente no carrinho e suas quantidades.
Para visualizar o conteúdo do carrinho, uma terceira aplicação será desenvolvida para apresentar ao usuário final, através de um display LCD, uma interface gráfica na qual ele poderá visualizar os produtos em seu carrinho, incluindo os seus preços e quantidades,  bem como uma opção para autoatendimento ou self-checkout (TOTVS, 2022). O autoatendimento do protótipo irá incluir apenas uma opção de simulação do processo de pagamento, servindo como prova de conceito para futura extensão do produto. 
A aplicação de interface gráfica irá se comunicar constantemente com o Gerenciador de carrinho através do protocolo WebSocket (FETTE, 2011), que utiliza um socket TCP (KUROSE, 2013) para estabelecer um canal duplex para comunicação eficiente em tempo-real (FOROUZAN, 2007).
	



3. JUSTIFICATIVA E RESULTADOS ESPERADOS
   5. Justificativa Resumida
O projeto propõe uma alternativa inteligente para os clientes de um supermercado, oferecendo um produto (carrinho inteligente) que possibilita maior economia de tempo, independência e controle no processo de realização de compras. Além disso, pode permitir aos operadores de um supermercado a redução nos custos com equipe de trabalho e a oferta de um elemento tecnológico que pode atrair clientes finais e que pode ser estendido para a transmissão de dados relativos às compras, ao cliente e ao mercado. 
Produtos concorrentes, como o Amazon Dash (AMAZON, 2022), o Caper AI Cart (CAPER, 2022) e o CUST2MATE Smart Cart (CUST2MATE, 2022), visam oferecer aos clientes finais de um supermercado alta autonomia e praticidade, sendo capazes de pesar, quantificar e precificar produtos colocados com alta precisão, utilizando de algoritmos de Visão Computacional (IBM, 2020) e de sensores conectados a sistemas embarcados robustos e de alta performance. Em relação aos concorrentes nacionais: o Nextop (NEXTOP, 2022)  utiliza de leitores de Bar Code e de câmeras apenas para a auditoria de segurança, que é feita de forma manual ao cliente sair do supermercado por um operador de caixa; e o Carrinho Inteligente Super Nosso (O TEMPO, 2017), por outro lado, não possui a funcionalidade de self-checkout, sendo utilizado apenas para consulta de produtos, de promoções e o monitoramento da lista de compras do cliente do supermercado. 
Em termos de diferenciais competitivos, os carrinhos da Amazon e do Super Nosso possuem viés proprietário, sendo somente utilizados nas lojas Amazon Fresh e supermercados Super Nosso, respectivamente; os carrinhos da Caper AI Cart, da Nextop e da CUST2MATE, por outro lado,  são comercializáveis para os mercados em geral. Em relação ao design, o Amazon Dash e o Caper AI Cart são muito semelhantes, possuindo câmeras ao redor do seu perímetro superior, um tablet e sensores de peso na extremidade inferior (base), enquanto o CUST2MATE possui uma balança no topo, junto ao tablet. A Caper AI oferece, em conjunto com o produto físico, também, uma solução para o monitoramento do movimento dos clientes do supermercado na sua estrutura física e de inteligência de dados para o entendimento de perfil de compra aos controladores das grandes redes, garantindo um aumento de 18% no volume de compras de cada consumidor (CAPER, 2022). Apenas o Carrinho Inteligente Super Nosso possui característica modularizada, ou seja, em todos os outros o sistema embarcado é embutido à estrutura mecânica do carrinho, o que pode representar uma desvantagem ao comprador final, que já pode possuir remessas de carrinhos em suas lojas, além do maior  custo total. Dentre os produtos nacionais, observa-se que nenhum utiliza de Visão Computacional para a identificação e quantificação dos produtos.
Em respeito a custos e ao valor de mercado das empresas que oferecem essas soluções, não há muitos dados divulgados, no entanto estima-se que um carrinho da Caper AI custe entre 5 a 10 mil dólares (DATAISSACRED, 2021); e em 2021 o seu valor de mercado (Patrimônio Líquido) era de 350 milhões de dólares (TECHCRUNCH, 2021).
Ainda que predominantemente sejam vistos produtos comercializáveis com o emprego de técnicas de Visão Computacional, foram consideradas as possibilidades de se empregar tags de RFID (Lemelson-MIT, 2022) ou leitores de bar code (CHANDA, 2019) para a identificação dos produtos. No entanto, devido à falta de praticidade e os custos envolvidos em etiquetar múltiplos produtos com tags RFID e as limitações de segurança pelo uso individual de bar codes no sistema, dado que não seria possível, por exemplo, identificar mais de uma entrada simultânea a não ser que explicitamente sejam lidos mais de um código, não há vantagem competitiva frente às técnicas de Inteligência Artificial baseadas no reconhecimento de imagens e a sua integração em um sistema embarcado, ainda que a sua complexidade de desenvolvimento possa ser superior.
Assim, a combinação da aplicação de diferentes domínios do conhecimento dentro da Engenharia Eletrônica, tais quais os Sistemas Embarcados e a Inteligência Artificial; as inúmeras possibilidades de extensão do produto, como a modularização (de software e de hardware); o valor comercial entregue com a otimização de tempo e praticidade, bem como com a atratividade trazida por um produto eletrônico robusto inerente a uma prática cotidiana; foram fatores determinantes que motivaram a equipe de trabalho a escolher esse projeto como Trabalho de Conclusão de Curso. 
	

   6. Resultados Esperados 
      1. Tecnológicos:
* Protótipo funcional de um carrinho inteligente de supermercado
      1. Científicos:
* Desenvolvimento de um modelo capaz de realizar o reconhecimento da entrada e saída de produtos.
      1. Econômicos:
* Melhoria da experiência do cliente, aumentando a retenção e gastos.
* Redução de custos com pessoal com a possibilidade de self-checkout.
      1. Sociais:
* Produto pode reduzir possíveis constrangimentos de clientes que precisam gastar uma quantia limitada. 
	4.  METODOLOGIA E MECANISMOS DE GESTÃO
   7. Metodologia
      1. Projeto mecânico da montagem do carrinho incluindo diagramas relevantes
Criação de diagramas e de manuais para auxiliar na montagem do carrinho, que incluem informações acerca da posição dos sensores e dos demais componentes eletrônicos.
      2. Geração do conjunto de dados para o treinamento do modelo de inteligência artificial
Registro de fotografias e rotulação das imagens que serão utilizadas para o treinamento e a validação da  inferência de classes por parte do modelo de deep learning.
      3. Validação do modelo de Deep Learning utilizado para o reconhecimento de produtos
Testes das taxas de acerto do modelo utilizando os objetos alvo.
      4. Obtenção da curva de resposta do sensor de massa utilizado
Obtenção da curva de resposta do sensor de massa, utilizando uma balança de referência, para garantir que as leituras realizadas pelo sensor sejam acuradas.
      5. Montagem do circuito amplificador e conversor analógico-digital para o sensor de massa.
O circuito será montado com as proteções adequadas para a fixação no protótipo mecânico.
      6. Construção dos diagramas UML descrevendo os algoritmos implementados
Concepção dos diagramas que descrevem a arquitetura do sistema e as suas interfaces, tais como a comunicação inter-aplicações e entre usuários.
      7. Construção do diagrama Entidade-Relacionamento do banco de dados
Elaboração do modelo de dados para a criação dos objetos do Banco de Dados e para o entendimento do seu comportamento.
      8. Projeto das Application Programming Interfaces (APIs) a serem utilizadas no protótipo
Definição dos dados a serem comunicados entre aplicações, das rotas de comunicação e dos aspectos programáticos para as APIs.
      9. Design da interface gráfica que será apresentada ao usuário
Construção de protótipos de baixa e alta fidelidade que servirão como base para a implementação da interface ao usuário.
      10. Realização de testes de integração entre as aplicações do protótipo
Elaboração de cenários de teste relevantes para garantir confiabilidade na comunicação entre aplicações e no funcionamento individual de cada aplicação.
      11. Realização de testes de usabilidade do protótipo
Realizar testes com usuários voluntários, buscando observar dificuldades na usabilidade do protótipo e pontos de melhoria.
	

   8. Cronograma Resumido e Datas Importantes
Início do projeto: Segunda semana de julho de 2022.
Início do desenvolvimento da aplicação de interface gráfica: Segunda semana de julho de 2022.
Início do desenvolvimento do modelo de inteligência artificial: Segunda semana de julho de 2022.
Início do desenvolvimento da aplicação de gerenciamento do carrinho: Terceira semana de julho de 2022.
Início da modelagem e construção do banco de dados: Terceira semana de julho de 2022.
Término do desenvolvimento da aplicação de interface gráfica: Quarta semana de julho
Início da coleta de dados e treinamento do modelo: Quarta semana de julho
Início da construção do circuito para o sensor strain gauge: Quarta semana de julho
Término do desenvolvimento da aplicação de gerenciamento do carrinho: Primeira semana de agosto
Término da modelagem e construção do banco de dados: Primeira semana de agosto
Início da construção do protótipo mecânico: Terceira semana de agosto
Término da construção do circuito para o sensor strain gauge: Terceira semana de agosto
Término da construção do protótipo mecânico: Primeira semana de setembro
Início dos testes e validações: Primeira semana de setembro
Término do desenvolvimento do modelo de inteligência artificial: Terceira semana de setembro
Término da coleta de dados e treinamento do modelo: Segunda semana de outubro
Término dos testes e validações: Quarta semana de novembro
Término do projeto: Quarta semana de novembro
	

   9. Cronograma Detalhado
  

	

	

   10. Análise de Riscos
      1. Modelo de detecção de produtos de não apresentar a taxa de acerto desejada
      2. Custo computacional do modelo tornar o tempo de processamento inviável para uma aplicação de tempo real
      3. Baixa performance e/ou altos tempos de resposta, degradando a experiência de uso
      4. Custo total elevado para a construção do protótipo
      5. Não aceitação do projeto por parte dos supermercados
      6. Não aceitação do projeto pelos clientes finais dos supermercados
	

5. DOCUMENTAÇÃO
   11. Estrutura do Sumário
1. Introdução
   1. Objetivos
      1. Objetivo geral
      2. Objetivos específicos
   2. Justificativa
2. Fundamentação teórica
   1. Sistemas embarcados
   2. Visão computacional
   3. Aprendizado de máquina
      1. Métodos de aprendizado de máquina
      2. Redes neurais artificiais
      3. Deep learning
   4. Sensores
      1. Célula de carga
      2. Strain Gauge
   5. Amplificadores
   6. Conversão análogico/digital
   7. Protocolo de comunicação
      1. Protocolo Two Wire
      2. Protocolo USB
   8. Sistemas Operacionais
      1. Linux
   9. Redes de computadores
      1. TCP/IP
      2. Sockets de rede
      3. Protocolo HTTP
      4. Protocolo WebSockets
   10. Banco de dados
      1. Modelo relacional
      2. Diagramas de entidade-relacionamento
      3. SQLite3
3. Metodologia
   1. NVIDIA Jetson
   2. Câmera
   3. Sensor Strain Gauge
   4. Circuito integrado HX711
   5. Modelo de inteligência artificial
      1. Coleta de dados
      2. Definição do modelo
      3. Treinamento do modelo
   6. Aplicação reconhecedora de produtos
   7. Aplicação de gerenciamento do carrinho
   8. Aplicação de interface gráfica com o usuário
   9. Construção mecânica
   10. Testes e validação
4. Resultados
5. Conclusão
6. Referências
7. Apêndices
	



   12. Referências
* SARWAR, M. A; DARAGHMI, Y. -A; LIU, K. -W; CHI, H. -C; IK, T. -U; LI Y. -L. Smart Shopping Carts Based on Mobile Computing and Deep Learning Cloud Services 2020 IEEE Wireless Communications and Networking Conference (WCNC), 2020, 1-6 p.
* REDDY, M. API Design for C++  Elsevier Science, 2011. 1 p.
* RUSSELL, S; NORVIG, P. Artificial Intelligence: A Modern Approach, 4th US ed. Pearson, 2021.
* DENG, L.; YU, D. Deep Learning: Methods and Applications Microsoft, 2014. 200 p.
* PROAKIS, J. MANOLAKIS, D. Digital Signal Processing: Principles, Algorithms and Applications Prentice Hall, 3rd edition 1995. 748-762 p.
* SABAH, N. H. Electric Circuits and Signals CRC Press, 2007. 56  p.
* FOROUZAN, B. A. Comunicação de dados e Redes de Computadores AMGH, 4 ed. 2007. 852-853, 115 p.
* KUROSE, J. F. ROSS, K. Redes de Computadores e a Internet: Uma Abordagem Top-Down Pearson Universidades, 6 ed. 2013.
* SILBERSCHATZ, A., KORTH H. F. SUDARSHAN, S. Sistema de Bancos de Dados GEN LTC. 5 ed. 2010. 5 p.
* BOSE A. K. et al., Screen-Printed Strain Gauge for Micro-Strain Detection Applications IEEE Sensors Journal, vol. 20, no. 21, 2020.
* HAYKIN, S. Redes Neurais: Princípios e prática Bookman 2 ed. 2000 27 p.
* CHANDA, Anupam. Barcode Technology and its Application in Libraries. 2019 Library Philosophy and Practice (e-journal), 3619, 5-11 p. Disponível em: https://digitalcommons.unl.edu/cgi/viewcontent.cgi?article=6896&context=libphilprac. Acesso em: 17 de maio de 2022.
* Lemelson-MIT. Charles Walton - RFID Technology. Disponível em: https://lemelson.mit.edu/resources/charles-walton. Acesso em: 17 de maio de 2022.
* IBM - International Business Machines. What is an application programming interface (API)? 2020. Disponível em: https://www.ibm.com/cloud/learn/api. Acesso em: 14 de maio de 2022.
* TOTVS. Self Checkout: 6 vantagens para o seu supermercado. Disponível em: https://www.totvs.com/blog/gestao-supermercadista/self-checkout. Acesso em: 14 de maio de 2022.
* AMAZON. Amazon Dash Cart. Disponível em: https://www.amazon.com/b?ie=UTF8&node=21289116011. Acesso em: 17 de maio de 2022.
* CUST2MATE. CUST2MATE Smart Cart Platform. Disponível em: https://www.cust2mate.com/cust2mate/. Acesso em: 17 de maio de 2022.
* CAPER. Caper AI Cart. Disponível em: https://www.caper.ai/cart. Acesso em: 17 de maio de 2022.
* NEXTOP. Smart Cart - Carrinho Inteligente. Disponível em: https://nextop.com.br/solucoes. Acesso em: 27 de maio de 2022.
* O TEMPO. Carrinho Inteligente Ajuda nas Compras. Disponível em: https://www.otempo.com.br/interessa/carrinho-inteligente-ajuda-nas-compras-1.1428706. Acesso em: 27 de maio de 2022. 
* FETTE, I.; MELNIKOV A. RFC 6455 - The WebSocket Protocol IETF 2011.
* https://www.sciencedirect.com/topics/computer-science/artificial-intelligence
* AVIA SEMICONDUTOR. 24-Bit Analog-to-Digital Converter (ADC) for Weigh Scales. Disponível em: https://cdn.sparkfun.com/datasheets/Sensors/ForceFlex/hx711_english.pdf. Acesso em: 27 de maio de 2022.
* TECHCRUNCH. Instacart acquires Caper AI, a smart cart and instant checkout startup, for $350M, as it moves deeper into physical retail tech. Disponível em:  https://techcrunch.com/2021/10/19/instacart-acquires-caper-ai-a-smart-cart-and-instant-checkout-startup-for-350m-as-it-moves-deeper-into-physical-retail-tech/. Acesso em: 27 de maio de 2022.
* DATAISSACRED. Retail Trends: AI Enabled Caper Smart Shopping Cart | AI Enabled Smart Shopping Carts. Disponível em: https://dataissacred.com/the-rise-of-the-ai-enabled-caper-smart-shopping-cart/. Acesso em: 27 de maio de 2022.
* NVIDIA. NVIDIA Jetson: a plataforma AI para máquinas autônomas Disponível em: ​​https://www.nvidia.com/pt-br/autonomous-machines/embedded-systems/. Acesso em: 27 de maio de 2022.
